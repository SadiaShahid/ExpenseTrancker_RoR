<!DOCTYPE html>
<html>
  <head>
    <title>ExpenseManager</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    
    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>

   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  </head>
  <div>
  <body>
    <p class="notice text-white p_notice"><%= notice %></p>
    <p class="alert text-white p_alert"><%= alert %></p>
    <% if user_signed_in? %>
      <div data-controller='ajax'>
        <nav class="navbar navbar-light bg-light">
          <div class="container-fluid">
            <div class='w-75'>
              <a class="navbar-brand" href="/">ExpenseManager</a>
            </div>
            <div class='d-flex justify-content-end w-75'>
              <div class="dropstart">
                <a class="icon" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                  <i class="fa fa-bell fa-lg" aria-hidden="true" data-action='click->ajax#notify'>
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" data-ajax-target='badge' id='bad'>
                    <%= current_user.notifications.unread.count %>
                  </span>
                  </i>
                </a>
                <ul class="dropdown-menu" id='list' aria-labelledby="dropdownMenuLink" data-ajax-target='notification'>
                </ul>
              </div>
            </div>
            <%= link_to "Sign-Out", destroy_user_session_path, method: :delete, 
          :class => "btn btn-dark text-white" %>
          </div>
        </nav>
      </div>
    <% end %>
     <div class="row">
        <div class="col">
          <%= yield %>
        </div>
      </div>
  </body>
  </div>
</html>
